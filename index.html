<!DOCTYPE html>
 <html>
  <head>
    <!-- meta for browser allow mobile design -->
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
    
    <title>Hong Kong Zoological and Botanical Gardens</title>

    <!-- import style for bootstrap, google font, leaflet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/icons/bootstrap-icons.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Satisfy" rel="stylesheet">	

   <!-- import css and esri.js lib -->
    <link rel="stylesheet" href="https://js.arcgis.com/4.26/esri/themes/light/main.css" />
    <script src="https://js.arcgis.com/4.28/"></script>
    
    <!-- loading modules -->
    <script>
        require([
            "esri/config", 
            "esri/Map", 
            "esri/views/MapView", 
            "esri/widgets/Locate", 
            "esri/widgets/Search", 
            "esri/layers/FeatureLayer",
            "esri/Graphic",
            "esri/layers/GraphicsLayer",
            "esri/widgets/Legend",
            "esri/widgets/LayerList",
            "esri/widgets/Expand", 
            "esri/core/reactiveUtils"
        ], (esriConfig, Map, MapView, Locate, Search, FeatureLayer, Graphic, GraphicsLayer, Legend, LayerList, Expand, reactiveUtils) => {
            esriConfig.apiKey = "AAPK1bafb1fd1b984000a2a5ab965ed0cf111GDugMmnipDNIQH9yaN93addT3iTZzAKwGLSLBZvZJBkFTaRPkJjvEi2gCoqyJml";

            const map = new Map({
                basemap: "arcgis-topographic"
            });

            const view = new MapView({
                container: "viewDiv", 
                center: [114.155700, 22.277778], // Longitude, latitude of Hong Kong Zoological and Botanical Gardens
                zoom: 18, // Zoom level
                map: map, // References the map object
                constraints: {
                    minZoom: 18 //Minimum Zoom Level
                }
            });

            const locateBtn = new Locate({
                view: view
            });

            //const graphicsLayer = new GraphicsLayer();
            //map.add(graphicsLayer);

            // Defining popup properties for zones
            const zonepopupTemplate = {
                "title": "{ZoneType}",
                "content": "<b>Zone Code:</b> {ZoneCode}<br> \
                            <b>Remarks:</b> {Remarks}<br> "
            }

            // ----- Settings for layer - Animals zones -----
            const animalsLayer = new FeatureLayer({
                url: "https://services.arcgis.com/HRPe58bUyBqyyiCt/arcgis/rest/services/Animals/FeatureServer",
                outFields: ["ZoneCode", "ZoneType", "Remarks"],
                popupTemplate: zonepopupTemplate
            });

            animalsLayer_titleForLegend = animalsLayer.title = animalsLayer.name = 'Animals';

            map.add(animalsLayer);

            // ----- Settings for layer - Gardens zones -----
            const gardensLayer = new FeatureLayer({
                url: "https://services.arcgis.com/HRPe58bUyBqyyiCt/arcgis/rest/services/Gardens/FeatureServer",
                outFields: ["ZoneCode", "ZoneType", "Remarks"],
                popupTemplate: zonepopupTemplate
            });

            gardensLayer_titleForLegend = gardensLayer.title = gardensLayer.name = 'Gardens';

            map.add(gardensLayer);          

            // Defining popup properties for species
            const speciespopupTemplate = {
                "title": "{species_birds}{species_mammals}{species_reptiles}{plants}",
                "content": "<b>Type:</b> {species_birds}{species_mammals}{species_reptiles}{plants}<br> \
                            <b>Zone:</b> {animals_type}{gardens_type} {zone_birds}{zone_mammals}{zone_reptiles}{zone_green_house}{zone_thematic_garden}<br>"
            }
            
            // ----- Settings for layer - Plants Species -----
            const gardensSpeciesLayer = new FeatureLayer({
                url: "https://services.arcgis.com/HRPe58bUyBqyyiCt/arcgis/rest/services/survey123_b49e614ee27c485e8d0d964247f00b7d_results/FeatureServer",
                renderer: {
                    type: "simple",  // autocasts as new UniqueValueRenderer()
                    symbol: {
                        type: "picture-marker",
                        url: "https://jusphonia1224.github.io/GEOG777Project2/logo/plants.png",
                        width: "20px",
                        height: "20px",
                    }
                },  
                definitionExpression: "animals_or_gardens = 'Gardens'",
                outFields: ["species_birds","species_mammals","species_reptiles","plants","plants","animals_type","gardens_type","zone_birds","zone_mammals","zone_reptiles","zone_green_house","zone_thematic_garden"],
                popupTemplate: speciespopupTemplate,
                visible: false
            });

            gardensSpeciesLayer_titleForLegend = gardensSpeciesLayer.title = gardensSpeciesLayer.name = 'Plants Species';

            map.add(gardensSpeciesLayer);  

            // Add the locate widget to the top left corner of the view
            view.ui.add(locateBtn, {
                position: "top-left"
            });

            const searchWidget = new Search({
                view: view
            });

            // Adds the search widget below other elements in the top left corner of the view
            view.ui.add(searchWidget, {
                position: "top-right",
                index: 2
            });

            // Add Legend Widget
            let legend = new Legend({
                view: view,
                container: document.createElement("div")
            });

            const legendExpand = new Expand({
                view: view,
                content: legend,
                expanded: true
            });

            view.ui.add(legendExpand, "bottom-right");

            // Add Layer List Widget
            let layerList = new LayerList({
                view: view,
                container: document.createElement("div")
            });

            const layerListExpand = new Expand({
                view: view,
                content: layerList
            });
                        
            view.ui.add(layerListExpand, "bottom-left");

            // Filter
        });
    </script>

  </head>
  <body>
    <header id="header" class="fixed-top d-flex justify-content-center align-items-center header-transparent">
        <nav id="navbar" class="navbar">
            <ul>
                <li><a class="nav-link scrollto" href="#home">Hong Kong Zoological and Botanical Gardens</a></li>
                <li><a class="nav-link scrollto" href="#home"><img src="logo/logo.jpg" width="100" height="100"></a></li>
                <li><a class="nav-link scrollto active" href="#home">Home</a></li>
                <li><a class="nav-link scrollto" href="#about">About</a></li>
                <li><a class="nav-link scrollto" href="#species">Species</a></li>
                <li><a class="nav-link scrollto" href="#mapSection">Map</a></li>
            </ul>
            <i class="bi bi-list mobile-nav-toggle"></i>
        </nav>
    </header>
    
    <!-- Home Section -->
    <section id="home">
        <div class="home-container">
            <h1>Hong Kong Zoological and Botanical Gardens</h1>
            <a href="#about" class="btn-scroll scrollto" title="Scroll Down"><i class="bi bi-chevron-down"></i></a>
        </div>
    </section>
    

    <!-- About Section -->
    <section id="about" class="about">
        <div class="container">
            <div class="section-title">
                <h2> About Hong Kong Zoological and Botanical Gardens </h2>
            </div>
            
        <div class="row">	
            <div class="col-lg-2 d-flex flex-column align-items-stretch">
                <img src="assets/moomoo god.jpg"  alt="Moomoo God" width="120" height="120">
            </div>						
            <div class="col-lg-4 d-flex flex-column align-items-stretch">
                <span>
                    <h5>무무신 (Moomoo God)</h5>
                    Age: 8
                    <br>
                    Gender: Moomoo
                    <br>
                    Occupation: Fan of Mamamoo
                    <br>
                    Location: All over the World
                    <br><br>
                </span>
            </div>					
            <div class="col-lg-6 d-flex flex-column align-items-stretch">
                <h4>
                    As a representative from Moomoo God, <br>
                    let's plan a trip schedule in visiting memorial spots of Mamamoo members.
                    <br><br>
                </h4>
            </div>									
        </div>
    </section>

    <!-- Species Section -->
    <section id="species" class="about">
        <div class="container">
            <div class="section-title">
                <h2> <img src="assets/MAMAMOO_Logo.jpg" height="50"></h2>
            </div>
            
        <div class="row">	
            <div class="col-lg-2 d-flex flex-column align-items-stretch">
                <img src="assets/moomoo god.jpg"  alt="Moomoo God" width="120" height="120">
            </div>						
            <div class="col-lg-4 d-flex flex-column align-items-stretch">
                <span>
                    <h5>무무신 (Moomoo God)</h5>
                    Age: 8
                    <br>
                    Gender: Moomoo
                    <br>
                    Occupation: Fan of Mamamoo
                    <br>
                    Location: All over the World
                    <br><br>
                </span>
            </div>					
            <div class="col-lg-6 d-flex flex-column align-items-stretch">
                <h4>
                    As a representative from Moomoo God, <br>
                    let's plan a trip schedule in visiting memorial spots of Mamamoo members.
                    <br><br>
                </h4>
            </div>									
        </div>
            
        <div class="row">
            <div class="col-lg-6 d-flex flex-column align-items-stretch">                    
                <a href="https://arcg.is/nrKPz"target="_blank" class="addRecordBtn">Report Species Location</a>
            </div>				
        </div>
    </section>
    
    <!-- Map Section -->
    <section id="mapSection" class="about">
        <div class="container">
            <div class="section-title">
                <h2> Map </h2>
            </div>			         
        
        <div id="viewDiv"></div>
    </section>	
   
    <footer id="footer">
        <div class="container">
            <div class="social-links">
                <a href="https://www.instagram.com/jusphonia/" target="_blank" class="linkedin"><i class="bi bi-instagram"></i></a>
                <a href="https://www.linkedin.com/in/jusphonia-ho" target="_blank" class="linkedin"><i class="bi bi-linkedin"></i></a>
            </div>
            
            <div class="copyright">
                University of Wisconsin - Madison - GEOG777 Project 2 - &copy; Copyright <strong><span> Jusphonia Ho</span></strong>. All Rights Reserved
            </div>
        </div>
    </footer>
    
    <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>
    
    <!--external script-->
    <script src="https://code.jquery.com/jquery-3.6.1.min.js" type="text/javascript"></script>
    <script src="js/main.js"></script>	
    </body>
</html>
